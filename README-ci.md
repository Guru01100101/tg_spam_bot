# CI/CD для Telegram бота з фільтрацією спаму

Цей документ описує налаштовану систему CI/CD для автоматичного тестування, збірки та майбутнього розгортання Telegram бота.

## Опис CI/CD процесу

### Безперервна Інтеграція (CI)

CI налаштовано за допомогою GitHub Actions і складається з наступних етапів:

1. **Тестування**:
   - Запуск автоматичних тестів для перевірки функціональності бота
   - Особливий фокус на тестуванні механізму нормалізації повідомлень

2. **Статичний аналіз коду**:
   - Перевірка стилю коду за допомогою Flake8
   - Перевірка типізації за допомогою MyPy

3. **Збірка Docker-образу**:
   - Створення оптимізованого Docker-образу
   - Збереження образу як артефакту для подальшого використання

### Як запустити CI локально

Для запуску тестів локально:

```bash
uv pip install pytest flake8 mypy
pytest test_*.py -v
flake8 .
mypy --ignore-missing-imports core/ models/ utils/
```

### Розгортання (CD)

На даний момент автоматичне розгортання не налаштовано. Для ручного розгортання використовуйте Docker:

```bash
# Збірка
docker build -t tg_spam_bot .

# Запуск
docker run -d --env-file .env --name tg_spam_bot tg_spam_bot
```

Або за допомогою Docker Compose:

```bash
# Створіть файл .env з необхідними змінними оточення
docker-compose up -d
```

## Плани з розвитку CI/CD

В майбутньому планується розширити систему CI/CD:

1. **Автоматичне розгортання**:
   - Автоматичне оновлення бота на production сервері після успішної збірки
   - Резервне копіювання даних перед оновленням

2. **Автоматичне створення нових ботів**:
   - Інтеграція з Telegram Bot API для створення нових ботів
   - Автоматичне розгортання ботів для нових клієнтів

3. **Покращення тестування**:
   - Розширення тестів для покриття більшої частини функціональності
   - Додавання інтеграційних тестів

## Структура CI/CD файлів

- `.github/workflows/ci.yml` - основний конфігураційний файл для GitHub Actions
- `Dockerfile` - файл для збірки Docker-образу
- `docker-compose.yml` - конфігурація для розгортання з Docker Compose
- `test_*.py` - файли з автоматичними тестами
